<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Passion Fruit - ë‚˜ì˜ ê°ì • ì¼ê¸°</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container fade-in">
        <header>
            <h1>ğŸŠ Passion Fruit</h1>
            <nav class="nav-links">
                <a href="/">í™ˆ</a>
                <a href="diary.html">ì¼ê¸°</a>
                <a href="question.html">ì§ˆë¬¸</a>
                <a href="quote.html">ëª…ì–¸</a>
            </nav>
            <div class="user-info" id="user-info" style="display: none;">
                <span class="user-email" id="user-email"></span>
                <button class="btn btn-secondary" onclick="authAPI.logout()">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
            <div id="auth-links" style="display: flex; gap: 10px;">
                <a href="auth.html" class="btn btn-primary">ë¡œê·¸ì¸</a>
            </div>
        </header>

        <main>
            <section style="text-align: center; padding: 60px 20px;">
                <h2 style="font-size: 3em; color: #667eea; margin-bottom: 20px;">
                    ë‚˜ë§Œì˜ ê°ì • ì¼ê¸°
                </h2>
                <p style="font-size: 1.3em; color: #666; margin-bottom: 40px; line-height: 1.8;">
                    ë§¤ì¼ì˜ ìƒê°ê³¼ ê°ì •ì„ ê¸°ë¡í•˜ê³ ,<br>
                    ì˜¤ëŠ˜ì˜ ì§ˆë¬¸ê³¼ ëª…ì–¸ìœ¼ë¡œ ì˜ê°ì„ ë°›ì•„ë³´ì„¸ìš”.
                </p>
                
                <div style="display: flex; gap: 20px; justify-content: center; margin-top: 40px;">
                    <a href="diary.html" class="btn btn-primary" style="font-size: 1.2em; padding: 15px 30px;">
                        ì¼ê¸° ì“°ê¸°
                    </a>
                    <button class="btn btn-secondary" onclick="loadRandomContent()" style="font-size: 1.2em; padding: 15px 30px;">
                        ì˜¤ëŠ˜ì˜ ì˜ê°
                    </button>
                </div>
            </section>

            <!-- ì˜¤ëŠ˜ì˜ ì§ˆë¬¸ -->
            <section id="today-question" style="margin-top: 40px;">
                <h3 style="color: #667eea; font-size: 2em; margin-bottom: 20px;">ğŸ’­ ì˜¤ëŠ˜ì˜ ì§ˆë¬¸</h3>
                <div id="question-content" class="loading">ì§ˆë¬¸ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
            </section>

            <!-- ì˜¤ëŠ˜ì˜ ëª…ì–¸ -->
            <section id="today-quote" style="margin-top: 40px;">
                <h3 style="color: #667eea; font-size: 2em; margin-bottom: 20px;">âœ¨ ì˜¤ëŠ˜ì˜ ëª…ì–¸</h3>
                <div id="quote-content" class="loading">ëª…ì–¸ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
            </section>

            <!-- ìµœê·¼ ì¼ê¸° -->
            <section id="recent-diaries" style="margin-top: 40px;">
                <h3 style="color: #667eea; font-size: 2em; margin-bottom: 20px;">ğŸ“– ìµœê·¼ ì¼ê¸°</h3>
                <div id="diaries-content" class="grid"></div>
            </section>
        </main>
    </div>

    <script src="js/api.js"></script>
    <script>
        // ëœë¤ ì§ˆë¬¸ ë¡œë“œ
        async function loadRandomQuestion() {
            try {
                const question = await questionAPI.getRandom();
                const questionContent = document.getElementById('question-content');
                questionContent.innerHTML = `
                    <div class="question-card fade-in">
                        <div class="question-text">${question.question}</div>
                    </div>
                `;
            } catch (error) {
                document.getElementById('question-content').innerHTML = 
                    '<p style="color: #999;">ì§ˆë¬¸ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>';
            }
        }

        // ëœë¤ ëª…ì–¸ ë¡œë“œ
        async function loadRandomQuote() {
            try {
                const quote = await quoteAPI.getRandom();
                const quoteContent = document.getElementById('quote-content');
                quoteContent.innerHTML = `
                    <div class="quote-card fade-in">
                        <div class="quote-text">"${quote.content}"</div>
                        ${quote.author ? `<div class="quote-author">- ${quote.author}</div>` : ''}
                    </div>
                `;
            } catch (error) {
                document.getElementById('quote-content').innerHTML = 
                    '<p style="color: #999;">ëª…ì–¸ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>';
            }
        }

        // ìµœê·¼ ì¼ê¸° ë¡œë“œ
        async function loadRecentDiaries() {
            try {
                const diaries = await diaryAPI.getAllDiaries(0, 6);
                const diariesContent = document.getElementById('diaries-content');
                
                if (diaries.length === 0) {
                    diariesContent.innerHTML = '<p style="color: #999; text-align: center;">ì•„ì§ ì‘ì„±ëœ ì¼ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                    return;
                }

                diariesContent.innerHTML = diaries.map(diary => `
                    <div class="card fade-in">
                        <div class="card-title">${diary.title}</div>
                        <div class="card-content">${diary.content.substring(0, 100)}${diary.content.length > 100 ? '...' : ''}</div>
                        <div class="card-meta">
                            <span>${formatDate(diary.created_at)}</span>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                document.getElementById('diaries-content').innerHTML = 
                    '<p style="color: #999;">ì¼ê¸°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>';
            }
        }

        // ëª¨ë“  ì»¨í…ì¸  ìƒˆë¡œê³ ì¹¨
        async function loadRandomContent() {
            await Promise.all([
                loadRandomQuestion(),
                loadRandomQuote()
            ]);
            showSuccess('ìƒˆë¡œìš´ ì˜ê°ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤!');
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', async () => {
            await loadRandomQuestion();
            await loadRandomQuote();
            await loadRecentDiaries();
        });
    </script>
</body>
</html>

